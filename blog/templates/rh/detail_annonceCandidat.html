{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails de l'annonce</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            margin: 0; 
            background: #e5e5e5; 
            padding: 2rem;
            line-height: 1.7;
            display: flex;
            justify-content: center;
        }

        .a4-container {
            background: #ffffff;
            width: 21cm;
            min-height: 29.7cm;
            padding: 2.5cm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            box-sizing: border-box;
        }

        h1 { 
            font-size: 2.2rem;
            font-weight: 500;
            color: #222222;
            text-align: center;
            margin-bottom: 2rem;
        }

        .job-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .job-title { font-size: 1.8rem; font-weight: 500; margin-bottom: 0.5rem; }
        .company-name { font-size: 1.1rem; color: #555555; margin-bottom: 1.5rem; }

        .job-description {
            font-size: 1.05rem;
            color: #333333;
            margin-bottom: 2rem;
        }

        .job-description b { color: #222222; }

        .actions {
            text-align: center;
            margin-top: 3rem;
        }

        .btn-primary {
            display: inline-block;
            background: #222222;
            color: #ffffff;
            padding: 0.75rem 2rem;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: transparent;
            color: #222222;
            border: 1px solid #222222;
        }

        @media (max-width: 992px) {
            .a4-container { width: 100%; padding: 1.5rem; }
            h1 { font-size: 1.8rem; }
            .job-title { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

<div class="a4-container">
    <h1>{{ annonce.role }} chez {{ annonce.poste.nom }}</h1>

    <div class="job-description">
        <p>
            Nous recherchons un(e) <b>{{ annonce.role }}</b> pour rejoindre l'équipe dynamique de <b>{{ annonce.poste.nom }}</b>. 
            Ce poste offre {% if annonce.salaire %}<b>{{ annonce.salaire|floatformat:0 }} Ariary</b>{% else %}un salaire compétitif{% endif %} 
            pour un horaire de {% if annonce.horaire_de_travail %}<b>{{ annonce.horaire_de_travail }}h par semaine</b>{% else %}temps à définir{% endif %}. 
            Le poste est basé à {% if annonce.lieu_de_poste %}<b>{{ annonce.lieu_de_poste }}</b>{% else %}un lieu à confirmer{% endif %}, 
            et les candidatures sont acceptées jusqu'au {% if annonce.date_limite_postule %}<b>{{ annonce.date_limite_postule|date:"d/m/Y à H:i" }}</b>{% else %}à définir{% endif %}.
        </p>

        {% if formations or competences or langues or loisirs %}
        <p>
            Le profil idéal comprend {% if formations %}les formations suivantes : 
                {% for f in formations %}{{ f.formation }}{% if f.est_obligatoire %} (Requis){% endif %}{% if not forloop.last %}, {% endif %}{% endfor %}.{% endif %}
            {% if competences %} Les compétences attendues incluent : 
                {% for c in competences %}{{ c.competence }}{% if c.est_obligatoire %} (Requis){% endif %}{% if not forloop.last %}, {% endif %}{% endfor %}.{% endif %}
            {% if langues %} La maîtrise de langues telles que : 
                {% for l in langues %}{{ l.langue }}{% if l.est_obligatoire %} (Requis){% endif %}{% if not forloop.last %}, {% endif %}{% endfor %}.{% endif %}
            {% if loisirs %} Un intérêt pour les domaines suivants est apprécié : 
                {% for lo in loisirs %}{{ lo.loisir }}{% if lo.est_obligatoire %} (Requis){% endif %}{% if not forloop.last %}, {% endif %}{% endfor %}.{% endif %}
        </p>
        {% endif %}

        <p>
            Les candidats intéressés doivent préparer {% if annonce.document_necessaire %}<b>{{ annonce.document_necessaire }}</b>{% else %}les documents standards (CV, lettre de motivation){% endif %} 
            et soumettre leur candidature dès que possible. Nous encourageons toutes les personnes motivées et qualifiées à postuler pour rejoindre notre équipe.
        </p>
    </div>

    <div class="actions">
        <a href="{% url 'postuler' annonce.id %}" class="btn-primary">Postuler pour ce poste</a>
    </div>
</div>

</body>
</html>
