{% load static %}
{% include 'rh/rh_sidebar.html' %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Détails de l'annonce</title>
<style>
    body { 
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
        margin: 0; 
        background: #f0f0f0;
        color: #333333;
        display: flex;
    }

    /* Conteneur global : sidebar + contenu */
    .container {
        display: flex;
        width: 100%;
    }

    /* Sidebar (déjà incluse) */
    .rh-sidebar {
        width: 250px; /* adapte à ton design */
        flex-shrink: 0;
    }

    /* Zone principale */
    .content {
        flex: 1;
        display: flex;
        justify-content: center; /* centre l’annonce */
        padding: 2rem;
    }

    .a4-page {
        background: #ffffff;
        width: 210mm;
        min-height: 297mm;
        padding: 3rem;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h1 {
        font-size: 2rem;
        font-weight: 600;
        color: #222222;
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .announcement {
        line-height: 1.8;
        font-size: 1rem;
        text-align: justify;
    }

    .highlight {
        font-weight: 600;
        color: #1e3a8a;
    }

    .actions {
        display: flex;
        gap: 1rem;
        margin-top: 3rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn {
        padding: 0.75rem 1.5rem;
        text-decoration: none;
        font-size: 1rem;
        cursor: pointer;
        border: 2px solid transparent;
        border-radius: 5px;
        transition: all 0.2s ease;
        display: inline-block;
    }

    .btn-primary {
        background: #1e3a8a;
        color: #ffffff;
        border-color: #1e3a8a;
    }

    .btn-primary:hover {
        background: #ffffff;
        color: #1e3a8a;
    }

    .btn-secondary {
        background: #ffffff;
        color: #1e3a8a;
        border: 2px solid #1e3a8a;
    }

    .btn-secondary:hover {
        background: #1e3a8a;
        color: #ffffff;
    }

    @media (max-width: 900px) {
        .container {
            flex-direction: column;
        }
        .rh-sidebar {
            width: 100%;
        }
        .a4-page {
            width: 100%;
            min-height: auto;
        }
    }
</style>
</head>
<body>

<div class="container">
    <div class="rh-sidebar">
        {% include 'rh/rh_sidebar.html' %}
    </div>
        <div class="content">
            <div class="a4-page">
                <h1>{{ annonce.role }}</h1>
        <div class="announcement">
            <p>
                Nous recherchons un(e) <span class="highlight">{{ annonce.poste.nom }}</span> pour rejoindre notre équipe 
                dynamique à {{ annonce.lieu_de_poste|default:"un lieu à définir" }}. 
                Ce poste propose un salaire attractif de {{ annonce.salaire|default:"à discuter" }} Ariary par mois 
                et un horaire de travail de {{ annonce.horaire_de_travail|default:"flexible" }} heures par semaine. 
                Les candidatures seront acceptées jusqu’au 
                {% if annonce.date_limite_postule %}{{ annonce.date_limite_postule|date:"d/m/Y H:i" }}{% else %}à confirmer{% endif %}.
            </p>

            <p>
                Le/la candidat(e) idéal(e) doit posséder une excellente capacité d’adaptation, un sens aigu 
                des responsabilités et une grande rigueur professionnelle. Nous mettons particulièrement 
                l’accent sur l’esprit d’équipe et la volonté de contribuer au développement de l’entreprise 
                sur le long terme. Une expérience préalable dans un poste similaire constitue un atout 
                considérable, bien que nous restions ouverts aux profils prometteurs et motivés.
            </p>

            {% if formations %}
            <p>
                Les formations requises incluent : 
                {% for f in formations %}
                    {{ f.formation }}{% if f.est_obligatoire %} (obligatoire){% endif %}{% if not forloop.last %}, {% else %}.{% endif %}
                {% endfor %}
            </p>
            {% endif %}

            {% if competences %}
            <p>
                Les compétences attendues couvrent : 
                {% for c in competences %}
                    {{ c.competence }}{% if c.est_obligatoire %} (obligatoire){% endif %}{% if not forloop.last %}, {% else %}.{% endif %}
                {% endfor %}
            </p>
            {% endif %}

            {% if langues %}
            <p>
                La maîtrise des langues suivantes est requise : 
                {% for l in langues %}
                    {{ l.langue }}{% if l.est_obligatoire %} (obligatoire){% endif %}{% if not forloop.last %}, {% else %}.{% endif %}
                {% endfor %}
            </p>
            {% endif %}

            {% if loisirs %}
            <p>
                Les loisirs ou centres d’intérêt liés au leadership, à la créativité ou aux activités 
                collaboratives seront particulièrement appréciés : 
                {% for lo in loisirs %}
                    {{ lo.loisir }}{% if lo.est_obligatoire %} (obligatoire){% endif %}{% if not forloop.last %}, {% else %}.{% endif %}
                {% endfor %}
            </p>
            {% endif %}

            <p>
                Enfin, les candidats doivent fournir les documents suivants : {{ annonce.document_necessaire|default:"à préciser" }}.  
                Toute candidature incomplète ou transmise hors délai ne pourra malheureusement pas être prise en compte.
            </p>

            <p>
                Rejoindre notre entreprise, c’est intégrer une structure en pleine croissance, bénéficier 
                d’un environnement de travail moderne, collaboratif et stimulant, et avoir l’opportunité 
                de développer des compétences solides au sein d’une équipe motivée et passionnée. 
                Nous attendons avec enthousiasme de découvrir vos candidatures.
            </p>
        </div>

            <div class="actions">
                <a href="{% url 'candidats_annonce' annonce.id %}" class="btn btn-primary">Voir tous les candidats</a>
                <a href="{% url 'liste_annonces' %}" class="btn btn-secondary">← Retour à la liste</a>
            </div>
        </div>
    </div>
</div>

</body>
</html>
